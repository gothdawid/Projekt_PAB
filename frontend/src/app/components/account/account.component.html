<ng-container *ngIf="loading">
    <div class="center-loading-icon">
        <app-loading-icon></app-loading-icon>
    </div>
</ng-container>
<div *ngIf="!loading" class="page-account">
    <div class="position">
        <div class="avatar-position">
			<ng-container *ngIf="account.avatar">
				<img class="avatar" [src]="account.avatar" />
			</ng-container>
			<ng-container *ngIf="!account.avatar">
				<img class="avatar" src="assets/default_image.jpg" />
			</ng-container>
            <div class="mt-2">
                <span class="btn btn-link" (click)="openImageModel()">Edit</span>
            </div>
        </div>
		<div class="column1">
			<div class="firstname">
				<label for="firstNameInput">ImiÄ™:</label>
				<input readonly type="text" class="form-control" id="firstNameInput" [(ngModel)]="account.firstName">
			</div>
			<div class="id">
				<label for="lastNameInput">Indeks:</label>
				<input readonly type="text" class="form-control" id="lastNameInput" [(ngModel)]="account.id">
			</div>
			<div class="group">
				<label for="groupInput">Grupa:</label>
				<input readonly type="text" class="form-control" id="groupInput" [(ngModel)]="account.group">
			</div>
		</div>
		<div class="column2">
			<div class="lastnamme">
				<label for="lastNameInput">Nazwisko:</label>
				<input readonly type="text" class="form-control" id="lastNameInput" [(ngModel)]="account.lastName">
			</div>
			<div class="mt-2 address">
				<h5>Adres korespodencji:</h5>
				<div class="info-address">
					<div class="street">
						<label for="streetInput">Ulica:</label>
						<input type="text" class="form-control" id="streetInput" [(ngModel)]="account.street">
						<div *ngIf="errors?.address?.street" class="field-error">{{ errors.address.street }}</div>
					</div>
					<div class="city">
						<label for="cityInput">Miasto:</label>
						<input type="text" class="form-control" id="cityInput" [(ngModel)]="account.city">
						<div *ngIf="errors?.address?.city" class="field-error">{{ errors.address.city }}</div>
					</div>
				</div>
			</div>
		</div>
    </div>
    <div class="mt-2 d-flex justify-content-center">
        <button class="btn btn-success me-2" (click)="editAccount()">Save</button>
        <button routerLink="/" class="btn btn-secondary">Cancel</button>
    </div>
</div>


<ng-template #editImageDialog>
	<app-modal>
		<div header>
			Edytuj avatar
		</div>
		<div body>
			<ng-container *ngIf="account.avatar">
				<div class="d-flex justify-content-center mt-2 mb-2">
					<img class="avatar" [src]="account.avatar" />
					<button type="button" class="btn-close" aria-label="Close" (click)="deleteImage()"></button>
				</div>
			</ng-container>
			<ng-container *ngIf="!account.avatar">
				<div class="d-flex justify-content-center mt-2 mb-2">
					<img class="avatar" src="assets/default_image.jpg" />
				</div>
			</ng-container>
			<input class="form-control" type="file" 
            		(change)="onChange($event)">
		</div>
		<div footer>
			<button class="btn btn-secondary" (click)="closeImageModal()">Zamknij</button>
		</div>
	</app-modal>
</ng-template>